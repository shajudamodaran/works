<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>                                    
<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-database.js"></script>
<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
 const firebaseConfig = {
  apiKey: "AIzaSyBz4BiFFwCbvQL-x5cNhQYabI7FTc682_w",
  authDomain: "newidea-cb1c2.firebaseapp.com",
  databaseURL: "https://newidea-cb1c2.firebaseio.com",
  projectId: "newidea-cb1c2",
  storageBucket: "newidea-cb1c2.appspot.com",
  messagingSenderId: "3889985035",
  appId: "1:3889985035:web:fbdfa7ababf38b0c58f90e",
  measurementId: "G-YNNWZBEY6W"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
 
</script>
<script type="text/javascript">

var new_k="no";

onload = function() 
{
	loaddrop();
	
	var ref2 = firebase.database().ref('Works');
	
	 ref2.on("value", function(snapshot) 
				  {
				   snapshot.forEach(function(childSnapshot) 
				   {
						  
						
						  var key_p =childSnapshot.key;
						   var c = parseInt(childSnapshot.key);
						   new_k=parseInt(c+1);	  
								   
													  
						});
						
						console.log(new_k);
						
						
					 
					 
				}, 
				function (error) 
				{
				   console.log("Error: " + error.code);
				});//end of ref
}

function loaddrop()
{
	 var select = document.getElementById("a3"); 
	
	 var ref2 = firebase.database().ref('Levels');
 
 ref2.on("value", function(snapshot) 
  {
	   snapshot.forEach(userSnapshot => 
	  {
	   var tempdata =userSnapshot.val().name;
	   var el = document.createElement("option");
		el.textContent = tempdata;
		el.value = tempdata;
		select.appendChild(el);
	  });
  
}, 
function (error) 
{
   console.log("Error: " + error.code);
});
	
}

	


function adddata()
{
	 
	 
	var a1=document.getElementById('a1').value;
	var a2=document.getElementById('a2').value;
	var a3=document.getElementById('a3').value;
	var a4=document.getElementById('a4').value;
	var a5=document.getElementById('a5').value;
	var a6=document.getElementById('a6').value;
	var a7=document.getElementById('a7').value;
	
	if(a1==""||a2==""||a3==""||a4==""||a5==""||a6=="")
	{
		alert("Fill the blanks");
	}
	else
	{
		sensdata();
		location.reload();
	}
	 
} 


function sensdata()
{
	
				
				finaladd(new_k);
}

function finaladd(newids)
{
				var a1=document.getElementById("a1").value;		
				var a2=document.getElementById("a2").value.trim();			
				var a3=document.getElementById("a3").value;			
				var a4=document.getElementById("a4").value;	
				var a5=document.getElementById("a5").value;
				var a6=document.getElementById("a6").value;	
				var a7=document.getElementById("a7").value;	
				var a8=document.getElementById("a8").value;	
				var a9=document.getElementById("a9").value;				
				  //console.log("Called");
				  let i=0;
				  var playersRef = firebase.database().ref("Works");
				   firebase.database().ref('Works/' + new_k).set({
				   ASSIGNED_ON: a2,
				   ASSIGNED_TO: a1,
				   PHASE: a3,
				   PRIORITY: a5,
				   CS: a9,
				    REMARKS: a7,
					 TAT: a6,
					  WORK: a4,
					  AGING: "Nil",
				   WORK_FINISHED_ON:a8
				  });
				  
				   console.log("Data Added");
				   location.reload();
}

function addnewlevel()
{
	var a1=document.getElementById("levelname").value;		
	 var playersRef = firebase.database().ref("Levels");
				   firebase.database().ref('Levels/' + a1).set({
				   id: a1,
				   name: a1
				  });
				  
				   console.log("Level Added");
				   location.reload();
}


</script>
<style type="text/css">
.dssdacas {
	font-family: Arial;
}
.fbdsfsdb {
	font-size: 14px;
}
.topnav 
{
  overflow: hidden;
  background-color: #008ad2;
  font-family:Arial;
  font-size:9;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 14px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #4CAF50;
  color: white;
}
</style>
</head>

<body>
<table width="100%" height="132" border="0" cellspacing="0" style="height: inherit; text-align: right; font-family: 'RobotoCondensed Regular'; font-size: 14px;">
  <tr>
    <td height="31" colspan="7" align="left" bgcolor="#ED2724" style="text-align: center; font-family: Arial;">&nbsp;</td>
  </tr>
  <tr>
    <td width="242" height="95" align="left" style="text-align: center; font-family: Arial;"><img src="IIB-logo small.png" alt="" width="242" height="65" onclick="openNav()" /></td>
    <td width="220" align="left" style="text-align: center">&nbsp;</td>
    <td width="66" style="text-align: center">&nbsp;</td>
    <td width="90" style="text-align: center">&nbsp;</td>
    <td width="54" bgcolor="#FFFFFF"><div align="center"></div></td>
    <td width="292" bgcolor="#FFFFFF"><div align="center"></div></td>
    <td width="208" bgcolor="#FFFFFF"><img src="skill.png" alt="" width="208" height="93" /></td>
  </tr>
</table>
<table width="100%" border="0" cellspacing="1">
  <tr>
    <td colspan="6" bgcolor="#E8E8E8">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="6">
    
      <div class="topnav"> 
    <a href="View.html">View</a> 
    <a  class="active"  href="add.html">Add Work</a> 
    <a href="#about">Downloads</a>
     </div>
    
    
    
    </td>
  </tr>
  <tr>
    <td width="1%">&nbsp;</td>
    <td width="18%">&nbsp;</td>
    <td width="1%">&nbsp;</td>
    <td width="41%">&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td height="34">&nbsp;</td>
    <td align="right" class="fbdsfsdb"><label for="select">Assigned to :</label></td>
    <td>&nbsp;</td>
    <td><label for="textfield"></label>
    <input type="text" name="textfield" id="a1" /></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td height="27">&nbsp;</td>
    <td align="right" class="fbdsfsdb">Assigned on :</td>
    <td>&nbsp;</td>
    <td>
    <input type="date" id="a2" />
    
    </td>
    <td colspan="2">Add New Level</td>
  </tr>
  <tr>
    <td height="27">&nbsp;</td>
    <td align="right" class="fbdsfsdb">Leve lName :</td>
    <td>&nbsp;</td>
    <td><select name="select2" id="a3">
     
    </select></td>
    <td width="13%"><input type="text" name="a" id="levelname" /></td>
    <td width="26%"><input type="submit" name="button2" id="button2" value="Add Level" onclick="addnewlevel();" /></td>
  </tr>
  <tr>
    <td height="27">&nbsp;</td>
    <td align="right" class="fbdsfsdb">Work :</td>
    <td>&nbsp;</td>
    <td><label for="textarea"></label>
    <textarea name="textarea" id="a4" cols="45" rows="5"></textarea></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td height="35">&nbsp;</td>
    <td align="right" class="fbdsfsdb">Priority Level :</td>
    <td>&nbsp;</td>
    <td><select name="select2" id="a5">
      <option value="High Priority">High Priority</option>
      <option value="Medium Priority">Medium Priority</option>
      <option value="Low Priority">Low Priority</option>
    </select></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right" class="fbdsfsdb">T.A.T :</td>
    <td>&nbsp;</td>
    <td><input type="date" id="a6" /></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right" class="fbdsfsdb">Current Status :</td>
    <td>&nbsp;</td>
    <td><textarea name="textarea2" id="a9" cols="45" rows="5"></textarea></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right" class="fbdsfsdb">Remarks :</td>
    <td>&nbsp;</td>
    <td><textarea name="textarea2" id="a7" cols="45" rows="5"></textarea></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right" class="fbdsfsdb">Work finished on :</td>
    <td>&nbsp;</td>
    <td><input type="date" id="a8" /></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right">&nbsp;</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="button" id="button" value="Add Work" onclick="adddata();" /></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td align="right">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
</table>
</body>
</html>
